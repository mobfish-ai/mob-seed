# state-evolution è§„æ ¼

> ç‰ˆæœ¬: 1.0.0
> åˆ›å»ºæ—¶é—´: 2026-01-01
> æœ€åæ›´æ–°: 2026-01-01
> ä¼˜å…ˆçº§: P1

## æ¦‚è¿° (Overview)

çŠ¶æ€è‡ªåŠ¨è¿›åŒ–å™¨ï¼Œæ ¹æ®é¡¹ç›®å®é™…è¿›å±•è‡ªåŠ¨æ›´æ–°è§„æ ¼çŠ¶æ€ï¼Œå®ç° AC è‡ªåŠ¨æ ‡è®°å’Œç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨è½¬æ¢ã€‚

### ç›®æ ‡ç”¨æˆ·
- SEED æ–¹æ³•è®ºä½¿ç”¨è€…
- éœ€è¦è‡ªåŠ¨åŒ–çŠ¶æ€ç®¡ç†çš„å¼€å‘è€…

### æ ¸å¿ƒä»·å€¼
- æµ‹è¯•é€šè¿‡åè‡ªåŠ¨æ ‡è®° AC
- AC å…¨å®Œæˆåè‡ªåŠ¨æç¤ºå½’æ¡£
- è¿›åº¦å¯è§†åŒ–é¢æ¿

## éœ€æ±‚ (Requirements)

### åŠŸèƒ½éœ€æ±‚

- [ ] FR-001: æµ‹è¯•ç»“æœè§£æ - è§£ææµ‹è¯•è¾“å‡ºè¯†åˆ«é€šè¿‡çš„ AC
- [ ] FR-002: AC è‡ªåŠ¨æ›´æ–° - æµ‹è¯•é€šè¿‡åæ›´æ–°è§„æ ¼ä¸­çš„ AC çŠ¶æ€
- [ ] FR-003: ç”Ÿå‘½å‘¨æœŸè½¬æ¢ - æ»¡è¶³æ¡ä»¶æ—¶è‡ªåŠ¨è½¬æ¢è§„æ ¼çŠ¶æ€
- [ ] FR-004: å½’æ¡£æç¤º - AC å…¨å®Œæˆåæç¤ºå¯å½’æ¡£
- [ ] FR-005: è¿›åº¦è®¡ç®— - è®¡ç®—è§„æ ¼/ä»£ç /æµ‹è¯•/AC å®Œæˆåº¦
- [ ] FR-006: é¢æ¿æ¸²æŸ“ - æ¸²æŸ“å¯è§†åŒ–è¿›åº¦é¢æ¿

### éåŠŸèƒ½éœ€æ±‚

- [ ] NFR-001: AC æ›´æ–° < 1 ç§’
- [ ] NFR-002: é¢æ¿æ¸²æŸ“ < 500ms
- [ ] NFR-003: çŠ¶æ€æ›´æ–°å¹‚ç­‰

## çº¦æŸ (Constraints)

### æŠ€æœ¯çº¦æŸ
- æµ‹è¯•ç»“æœéœ€åŒ…å« AC æ˜ å°„æ³¨é‡Š
- è§„æ ¼æ–‡ä»¶ä½¿ç”¨ Markdown checkbox æ ¼å¼
- ä»…æ”¯æŒ OpenSpec æ¨¡å¼

### ä¸šåŠ¡çº¦æŸ
- çŠ¶æ€åªèƒ½å•å‘è¿›åŒ–ï¼ˆdraft â†’ archivedï¼‰
- archived éœ€è¦ --reopen æ‰èƒ½é‡æ–°ç¼–è¾‘

## æ¥å£è®¾è®¡ (Interface)

### çŠ¶æ€è½¬æ¢è§„åˆ™

| å½“å‰çŠ¶æ€ | ç›®æ ‡çŠ¶æ€ | è‡ªåŠ¨è§¦å‘æ¡ä»¶ |
|---------|---------|-------------|
| draft | review | è§„æ ¼é€šè¿‡ linter æ£€æŸ¥ |
| review | implementing | ç”¨æˆ·ç¡®è®¤å¼€å§‹å®ç° |
| implementing | archived | æ‰€æœ‰ AC æ ‡è®°å®Œæˆ + æµ‹è¯•é€šè¿‡ |

### è¿›åº¦é¢æ¿æ ¼å¼

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“Š v2.1-release-automation è¿›åº¦é¢æ¿                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  çŠ¶æ€: implementing                                          â•‘
â•‘  è¿›åº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 80%                             â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ ğŸ“‹ è§„æ ¼: 4/4 å®Œæˆ                                        â”‚ â•‘
â•‘  â”‚ ğŸ’» ä»£ç : 3/4 å·²æ´¾ç”Ÿ                                      â”‚ â•‘
â•‘  â”‚ ğŸ§ª æµ‹è¯•: 12/15 é€šè¿‡                                      â”‚ â•‘
â•‘  â”‚ âœ… AC:   8/10 å®Œæˆ                                       â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### API æ¥å£

```javascript
// lib/workflow/state-evolution.js

/**
 * è§£ææµ‹è¯•ç»“æœæå– AC æ˜ å°„
 * @param {string} testOutput - æµ‹è¯•è¾“å‡º
 * @returns {ACResult[]} AC ç»“æœåˆ—è¡¨
 */
function parseTestResults(testOutput);

/**
 * æ›´æ–°è§„æ ¼ä¸­çš„ AC çŠ¶æ€
 * @param {string} specPath - è§„æ ¼æ–‡ä»¶è·¯å¾„
 * @param {ACResult[]} results - AC ç»“æœ
 * @returns {Promise<UpdateResult>}
 */
async function updateACStatus(specPath, results);

/**
 * æ£€æŸ¥æ˜¯å¦å¯ä»¥è½¬æ¢çŠ¶æ€
 * @param {string} specPath - è§„æ ¼æ–‡ä»¶è·¯å¾„
 * @param {string} targetState - ç›®æ ‡çŠ¶æ€
 * @returns {TransitionCheck}
 */
function canTransition(specPath, targetState);

/**
 * æ‰§è¡ŒçŠ¶æ€è½¬æ¢
 * @param {string} specPath - è§„æ ¼æ–‡ä»¶è·¯å¾„
 * @param {string} targetState - ç›®æ ‡çŠ¶æ€
 * @returns {Promise<void>}
 */
async function transitionState(specPath, targetState);

/**
 * è®¡ç®—é¡¹ç›®è¿›åº¦
 * @param {string} proposalPath - ææ¡ˆç›®å½•è·¯å¾„
 * @returns {Progress}
 */
function calculateProgress(proposalPath);

/**
 * æ¸²æŸ“è¿›åº¦é¢æ¿
 * @param {Progress} progress - è¿›åº¦ä¿¡æ¯
 * @returns {string} é¢æ¿å­—ç¬¦ä¸²
 */
function renderProgressPanel(progress);
```

## éªŒæ”¶æ ‡å‡† (Acceptance Criteria)

### AC-010: æµ‹è¯•é€šè¿‡è‡ªåŠ¨æ›´æ–° AC
- Given: æµ‹è¯•æ–‡ä»¶åŒ…å« `// AC-001` æ³¨é‡Š
- When: è¯¥æµ‹è¯•é€šè¿‡
- Then: è§„æ ¼ä¸­ `- [ ] AC-001` å˜ä¸º `- [x] AC-001`

### AC-011: AC å…¨å®Œæˆæç¤ºå½’æ¡£
- Given: æ‰€æœ‰ AC å·²æ ‡è®° `[x]`
- When: æ‰§è¡Œ `/mob-seed`
- Then: æç¤º `æ‰€æœ‰ AC å·²å®Œæˆï¼Œæ˜¯å¦å½’æ¡£ï¼Ÿ [Y/n]`

### AC-012: è¿›åº¦å¯è§†åŒ–é¢æ¿
- Given: ææ¡ˆæœ‰ 4 ä¸ªè§„æ ¼ï¼Œ8 ä¸ª AC
- When: æ‰§è¡Œ `/mob-seed`
- Then: æ˜¾ç¤ºè¿›åº¦é¢æ¿ï¼ŒåŒ…å«è§„æ ¼/ä»£ç /æµ‹è¯•/AC å®Œæˆåº¦

## æ´¾ç”Ÿäº§ç‰© (Derived Outputs)

> è·¯å¾„éµå¾ª `.seed/config.json` é…ç½®ï¼Œç›¸å¯¹äº `skills/mob-seed/` ç›®å½•

| ç±»å‹ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| ä»£ç  | skills/mob-seed/lib/workflow/state-evolution.js | çŠ¶æ€è¿›åŒ–å™¨ |
| æµ‹è¯• | skills/mob-seed/test/workflow/state-evolution.test.js | å•å…ƒæµ‹è¯• |
| æ–‡æ¡£ | docs/api/state-evolution.md | API æ–‡æ¡£ |
