---
description: SEED åŒæ­¥ - åŒæ­¥è§„æ ¼ä¸ä»£ç çš„å˜æ›´ï¼ˆè‡ªåŠ¨æ£€æµ‹å‰ç½®æ¡ä»¶ï¼‰
allowed-tools: Read, Write, Edit, Bash, Glob, Grep, AskUserQuestion
argument-hint: [spec-path] [--direction=<spec|code>] [--dry-run] [--interactive]
---

# mob-seed-sync

æ‰§è¡Œå†…å®¹ï¼š$ARGUMENTS

## ğŸ“¦ ä¾èµ–èµ„æº

- æŠ€èƒ½ç›®å½•: `.claude/skills/mob-seed/`
- å·¥å…·æ¨¡å—: `adapters/seed-utils.js`
- å·®å¼‚æ£€æµ‹: `adapters/defend-checker.js`

## æ‰§è¡Œæ­¥éª¤

### æ­¥éª¤0: åˆå§‹åŒ–è·¯å¾„

```bash
# åŠ¨æ€æ£€æµ‹æŠ€èƒ½ç›®å½•
if [ -d ".claude/skills/mob-seed" ]; then
    SKILL_DIR=".claude/skills/mob-seed"
elif [ -d "$HOME/.claude/skills/mob-seed" ]; then
    SKILL_DIR="$HOME/.claude/skills/mob-seed"
else
    echo "âŒ æœªæ‰¾åˆ° mob-seed æŠ€èƒ½ç›®å½•"
    exit 1
fi
```

### æ­¥éª¤1: å‰ç½®æ£€æŸ¥ä¸è‡ªåŠ¨å¼•å¯¼

**æ£€æŸ¥ SEED é¡¹ç›®æ˜¯å¦å·²åˆå§‹åŒ–**ï¼š

1. æ£€æŸ¥ `.seed/config.json` æ˜¯å¦å­˜åœ¨

**å¦‚æœæœªåˆå§‹åŒ–**ï¼š
```
âš ï¸ å½“å‰é¡¹ç›®å°šæœªåˆå§‹åŒ– SEED ç»“æ„

éœ€è¦å…ˆæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
1. /mob-seed-init - æ™ºèƒ½æ‰«æå¹¶åˆå§‹åŒ–é…ç½®
2. /mob-seed-spec <åŠŸèƒ½å> - åˆ›å»ºè§„æ ¼æ–‡ä»¶

æ˜¯å¦ç°åœ¨è‡ªåŠ¨æ‰§è¡Œåˆå§‹åŒ–ï¼Ÿ[Y/n]
```

- ç”¨æˆ·ç¡®è®¤åï¼Œè‡ªåŠ¨æ‰§è¡Œ `/mob-seed-init`
- åˆå§‹åŒ–å®Œæˆåï¼Œæç¤ºç”¨æˆ·åˆ›å»ºè§„æ ¼æ–‡ä»¶

**åŠ è½½é…ç½®è·å–è·¯å¾„**ï¼š
```javascript
const config = loadSeedConfig();
const SPECS_DIR = config.paths.specs;  // å¯èƒ½æ˜¯ "specs", "docs/specs" ç­‰
```

**æ£€æŸ¥è§„æ ¼æ–‡ä»¶æ˜¯å¦å­˜åœ¨**ï¼š

1. å¦‚æœæä¾›äº† `<spec-path>` å‚æ•°ï¼Œæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. å¦‚æœæœªæä¾›å‚æ•°ï¼Œæ‰«æ `{config.paths.specs}/` ç›®å½•

**å¦‚æœæ²¡æœ‰è§„æ ¼æ–‡ä»¶**ï¼š

é¦–å…ˆæ£€æµ‹æ˜¯å¦å­˜åœ¨ä»£ç ç›®å½•ï¼š
```javascript
// æ£€æµ‹å¸¸è§ä»£ç ç›®å½•
const codeDirs = ['src/', 'lib/', 'skills/', 'commands/', 'adapters/'];
const existingCode = codeDirs.filter(dir => fs.existsSync(dir));
```

**æƒ…å†µA: æœ‰ä»£ç ä½†æ— è§„æ ¼ï¼ˆé€†å‘åŒæ­¥åœºæ™¯ï¼‰**ï¼š
```
ğŸ” æ£€æµ‹åˆ°ä»£ç ä½†æ— è§„æ ¼æ–‡ä»¶

å‘ç°ä»¥ä¸‹ä»£ç ç›®å½•ï¼š
- lib/ (15 ä¸ªæ–‡ä»¶)
- skills/ (8 ä¸ªæ–‡ä»¶)
- commands/ (5 ä¸ªæ–‡ä»¶)

è¿™æ˜¯ä¸€ä¸ªå·²æœ‰ä»£ç çš„é¡¹ç›®ï¼Œå»ºè®®æ‰§è¡Œé€†å‘åŒæ­¥ï¼š
ä»ä»£ç ç”Ÿæˆåˆå§‹è§„æ ¼æ–‡ä»¶

æ˜¯å¦æ‰§è¡Œé€†å‘åŒæ­¥ï¼Ÿ[Y/n]
```

ç”¨æˆ·ç¡®è®¤åï¼Œæ‰§è¡Œé€†å‘åŒæ­¥ï¼š
1. æ‰«æä»£ç ç›®å½•ï¼Œè¯†åˆ«æ¨¡å—ç»“æ„
2. æå–å‡½æ•°ç­¾åã€ç±»å®šä¹‰ã€å¯¼å‡ºæ¥å£
3. ç”Ÿæˆ fspec.md è§„æ ¼æ–‡ä»¶åˆ° `{specs_dir}/`
4. ç”Ÿæˆ CODEBASE_SPEC.md æ¦‚è§ˆæ–‡æ¡£

**æƒ…å†µB: æ— ä»£ç æ— è§„æ ¼ï¼ˆç©ºé¡¹ç›®ï¼‰**ï¼š
```
âš ï¸ æœªæ‰¾åˆ°è§„æ ¼æ–‡ä»¶å’Œä»£ç 

è¯·å…ˆåˆ›å»ºè§„æ ¼æ–‡ä»¶ï¼š
/mob-seed-spec "åŠŸèƒ½åç§°"

æ˜¯å¦ç°åœ¨åˆ›å»ºä¸€ä¸ªç¤ºä¾‹è§„æ ¼ï¼Ÿ[Y/n]
```

- ç”¨æˆ·ç¡®è®¤åï¼Œå¼•å¯¼åˆ›å»ºè§„æ ¼æ–‡ä»¶

**å¦‚æœæœ‰å¤šä¸ªè§„æ ¼æ–‡ä»¶ä½†æœªæŒ‡å®š**ï¼š
```
ğŸ“‹ å‘ç°ä»¥ä¸‹è§„æ ¼æ–‡ä»¶ï¼š

1. {specs_dir}/user-auth.fspec.md
2. {specs_dir}/payment.fspec.md
3. {specs_dir}/notification.fspec.md

è¯·é€‰æ‹©è¦åŒæ­¥çš„è§„æ ¼ï¼ˆè¾“å…¥ç¼–å·æˆ–è·¯å¾„ï¼‰ï¼š
```

> æ³¨ï¼š`specs_dir` æ¥è‡ª `.seed/config.json` çš„ `paths.specs` é…ç½®

### æ­¥éª¤2: è§£æå‚æ•°

ä» `$ARGUMENTS` ä¸­è§£æï¼š

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `<spec-path>` | è§„æ ¼æ–‡ä»¶è·¯å¾„ | å¯é€‰ï¼ˆäº¤äº’é€‰æ‹©ï¼‰ |
| `--direction` | åŒæ­¥æ–¹å‘ (specâ†’code æˆ– codeâ†’spec) | spec |
| `--dry-run` | åªæ˜¾ç¤ºå°†è¦æ‰§è¡Œçš„æ“ä½œ | false |
| `--interactive` | äº¤äº’å¼ç¡®è®¤æ¯ä¸ªæ“ä½œ | false |

### æ­¥éª¤3: æ£€æµ‹å·®å¼‚

è°ƒç”¨ DefendChecker æ£€æµ‹è§„æ ¼ä¸ä»£ç çš„å·®å¼‚ã€‚

### æ­¥éª¤4: ç¡®å®šåŒæ­¥æ–¹å‘

#### spec â†’ codeï¼ˆè§„æ ¼ä¸ºå‡†ï¼‰

å°†ä»£ç åŒæ­¥åˆ°è§„æ ¼å®šä¹‰ï¼š
- ç”Ÿæˆç¼ºå¤±çš„ä»£ç éª¨æ¶
- æ›´æ–°æ–‡æ¡£ç‰ˆæœ¬
- ç”Ÿæˆç¼ºå¤±çš„æµ‹è¯•éª¨æ¶

#### code â†’ specï¼ˆä»£ç ä¸ºå‡†ï¼‰

å°†è§„æ ¼åŒæ­¥åˆ°ä»£ç å®ç°ï¼š
- åœ¨è§„æ ¼ä¸­æ·»åŠ é¢å¤–åŠŸèƒ½çš„ FR
- æ›´æ–°è§„æ ¼ç‰ˆæœ¬å·

### æ­¥éª¤5: æ‰§è¡ŒåŒæ­¥

#### Dry Run æ¨¡å¼

```
ğŸ”„ åŒæ­¥é¢„è§ˆ: user-auth (spec â†’ code)

å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œ:

1. [CREATE] src/user-auth/resetPassword.js
   - ä¸º FR-003 ç”Ÿæˆä»£ç éª¨æ¶

2. [CREATE] test/user-auth/ac-003.test.js
   - ä¸º AC-003 ç”Ÿæˆæµ‹è¯•éª¨æ¶

3. [UPDATE] docs/user-auth.md
   - æ›´æ–°ç‰ˆæœ¬å· 1.1.0 â†’ 1.2.0

ç¡®è®¤æ‰§è¡Œ? [y/N]
```

#### å®é™…æ‰§è¡Œ

```
ğŸ”„ æ­£åœ¨åŒæ­¥: user-auth

â³ ç”Ÿæˆ FR-003 ä»£ç éª¨æ¶...
âœ… åˆ›å»º src/user-auth/resetPassword.js

â³ ç”Ÿæˆ AC-003 æµ‹è¯•éª¨æ¶...
âœ… åˆ›å»º test/user-auth/ac-003.test.js

â³ æ›´æ–°æ–‡æ¡£ç‰ˆæœ¬...
âœ… æ›´æ–° docs/user-auth.md

---
âœ… åŒæ­¥å®Œæˆ

å·²åˆ›å»º: 2 ä¸ªæ–‡ä»¶
å·²æ›´æ–°: 1 ä¸ªæ–‡ä»¶
```

### æ­¥éª¤6: ç”ŸæˆåŒæ­¥æŠ¥å‘Š

```
ğŸ“Š åŒæ­¥æŠ¥å‘Š: user-auth

æ‰§è¡Œæ—¶é—´: 2024-12-28 10:35:00
åŒæ­¥æ–¹å‘: spec â†’ code

| æ“ä½œ | æ–‡ä»¶ | çŠ¶æ€ |
|------|------|------|
| CREATE | src/user-auth/resetPassword.js | âœ… |
| CREATE | test/user-auth/ac-003.test.js | âœ… |
| UPDATE | docs/user-auth.md | âœ… |

ä¸‹ä¸€æ­¥:
1. å®ç° resetPassword.js ä¸­çš„ TODO
2. å®Œå–„ ac-003.test.js ä¸­çš„æµ‹è¯•æ–­è¨€
3. è¿è¡Œ /mob-seed-exec --test éªŒè¯
```

## åŒæ­¥è§„åˆ™

### spec â†’ codeï¼ˆé»˜è®¤ï¼‰

| å·®å¼‚ç±»å‹ | åŒæ­¥åŠ¨ä½œ |
|----------|----------|
| FR æœªå®ç° | ç”Ÿæˆä»£ç éª¨æ¶ï¼ˆå¸¦ TODOï¼‰ |
| AC æ— æµ‹è¯• | ç”Ÿæˆæµ‹è¯•éª¨æ¶ï¼ˆå¸¦ TODOï¼‰ |
| æ–‡æ¡£è¿‡æ—¶ | é‡æ–°ç”Ÿæˆæ–‡æ¡£ |
| é¢å¤–ä»£ç  | ä¸å¤„ç†ï¼ˆæç¤ºè­¦å‘Šï¼‰ |

### code â†’ spec

| å·®å¼‚ç±»å‹ | åŒæ­¥åŠ¨ä½œ |
|----------|----------|
| é¢å¤–åŠŸèƒ½ | åœ¨è§„æ ¼ä¸­æ·»åŠ  FR |
| é¢å¤–æµ‹è¯• | åœ¨è§„æ ¼ä¸­æ·»åŠ  AC |
| ç‰ˆæœ¬ä¸ç¬¦ | æ›´æ–°è§„æ ¼ç‰ˆæœ¬ |

## å®‰å…¨æœºåˆ¶

1. **Dry Run**: é»˜è®¤å…ˆé¢„è§ˆï¼Œéœ€ç¡®è®¤æ‰æ‰§è¡Œ
2. **å¤‡ä»½**: ä¿®æ”¹å‰è‡ªåŠ¨å¤‡ä»½åŸæ–‡ä»¶
3. **Git**: å»ºè®®åœ¨åŒæ­¥å‰æäº¤å½“å‰æ›´æ”¹
4. **å›æ»š**: ä¿ç•™åŒæ­¥æ—¥å¿—ï¼Œæ”¯æŒå›æ»š

## ç¤ºä¾‹ç”¨æ³•

```bash
# è‡ªåŠ¨æ£€æµ‹å¹¶å¼•å¯¼ï¼ˆæ— å‚æ•°ï¼‰
/mob-seed-sync

# é¢„è§ˆåŒæ­¥æ“ä½œ
/mob-seed-sync seed/specs/user-auth.fspec.md --dry-run

# æ‰§è¡ŒåŒæ­¥ï¼ˆè§„æ ¼ä¸ºå‡†ï¼‰
/mob-seed-sync seed/specs/user-auth.fspec.md

# ä»£ç ä¸ºå‡†çš„åŒæ­¥
/mob-seed-sync seed/specs/user-auth.fspec.md --direction=code

# äº¤äº’å¼åŒæ­¥
/mob-seed-sync seed/specs/user-auth.fspec.md --interactive
```

## è‡ªåŠ¨å¼•å¯¼æµç¨‹

```
ç”¨æˆ·æ‰§è¡Œ /mob-seed-sync
        â†“
    æ£€æŸ¥ .seed/ ç›®å½•
        â†“
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   â†“         â†“
 ä¸å­˜åœ¨     å­˜åœ¨
   â†“         â†“
 è¯¢é—®æ˜¯å¦   æ£€æŸ¥è§„æ ¼æ–‡ä»¶
 åˆå§‹åŒ–         â†“
   â†“      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
 Y â†’ æ‰§è¡Œ  â†“         â†“
 init    æ— æ–‡ä»¶    æœ‰æ–‡ä»¶
   â†“       â†“         â†“
 ç»§ç»­æµç¨‹  æ£€æµ‹ä»£ç    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
           â†“        â†“         â†“
      â”Œâ”€â”€â”€â”´â”€â”€â”€â”   å•ä¸ª       å¤šä¸ª
      â†“       â†“   ç›´æ¥æ‰§è¡Œ   åˆ—è¡¨é€‰æ‹©
    æœ‰ä»£ç    æ— ä»£ç    â†“         â†“
      â†“       â†“     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    é€†å‘    åˆ›å»º          â†“
    åŒæ­¥    ç¤ºä¾‹      æ‰§è¡ŒåŒæ­¥
      â†“       â†“
      â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
              æ‰§è¡ŒåŒæ­¥
```

## é€†å‘åŒæ­¥è¯¦ç»†æµç¨‹

å½“æ£€æµ‹åˆ°"æœ‰ä»£ç ä½†æ— è§„æ ¼"æ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

### æ­¥éª¤R1: æ‰«æä»£ç ç»“æ„

```javascript
// æ‰«æä»£ç ç›®å½•
const scanResult = {
  directories: ['lib/', 'skills/', 'commands/'],
  modules: [],
  totalFiles: 0
};

// è¯†åˆ«æ¨¡å—
for (const dir of scanResult.directories) {
  const modules = identifyModules(dir);
  scanResult.modules.push(...modules);
}
```

### æ­¥éª¤R2: åˆ†ææ¨¡å—æ¥å£

å¯¹æ¯ä¸ªæ¨¡å—æå–ï¼š
- å¯¼å‡ºçš„å‡½æ•°/ç±»
- å‡½æ•°å‚æ•°å’Œè¿”å›ç±»å‹
- JSDoc æ³¨é‡Š
- ä¾èµ–å…³ç³»

### æ­¥éª¤R3: ç”Ÿæˆè§„æ ¼æ–‡ä»¶

```
ğŸ“ æ­£åœ¨ç”Ÿæˆè§„æ ¼æ–‡ä»¶...

â³ åˆ†æ lib/lifecycle/ ...
âœ… ç”Ÿæˆ specs/lifecycle.fspec.md
   - 3 ä¸ªåŠŸèƒ½éœ€æ±‚ (FR)
   - 5 ä¸ªéªŒæ”¶æ ‡å‡† (AC)

â³ åˆ†æ lib/stacks/ ...
âœ… ç”Ÿæˆ specs/stacks.fspec.md
   - 2 ä¸ªåŠŸèƒ½éœ€æ±‚ (FR)
   - 4 ä¸ªéªŒæ”¶æ ‡å‡† (AC)

---
âœ… é€†å‘åŒæ­¥å®Œæˆ

ç”Ÿæˆè§„æ ¼: 2 ä¸ª
åŠŸèƒ½éœ€æ±‚: 5 ä¸ª
éªŒæ”¶æ ‡å‡†: 9 ä¸ª

ä¸‹ä¸€æ­¥:
1. å®¡æŸ¥ç”Ÿæˆçš„è§„æ ¼æ–‡ä»¶
2. è¡¥å……ä¸šåŠ¡ç»†èŠ‚å’Œè¾¹ç•Œæ¡ä»¶
3. è¿è¡Œ /mob-seed-sync éªŒè¯åŒæ­¥çŠ¶æ€
```

### æ­¥éª¤R4: ç”Ÿæˆé¡¹ç›®æ¦‚è§ˆ

ç”Ÿæˆ `CODEBASE_SPEC.md`ï¼š
```markdown
# é¡¹ç›®ä»£ç è§„æ ¼æ¦‚è§ˆ

## æ¨¡å—ç»“æ„

| æ¨¡å— | è·¯å¾„ | åŠŸèƒ½ | è§„æ ¼æ–‡ä»¶ |
|------|------|------|----------|
| lifecycle | lib/lifecycle/ | ç”Ÿå‘½å‘¨æœŸç®¡ç† | specs/lifecycle.fspec.md |
| stacks | lib/stacks/ | æŠ€æœ¯æ ˆæ”¯æŒ | specs/stacks.fspec.md |

## ä¾èµ–å…³ç³»

[æ¨¡å—ä¾èµ–å›¾]

## åŒæ­¥çŠ¶æ€

âœ… æ‰€æœ‰ä»£ç å·²æœ‰å¯¹åº”è§„æ ¼
```
